
# Expert Coding using JavaScript - Lesson 6 Activity 6.6


### @explicitHints true

  

## Step 1 @unplugged

  For this challenge, we are going to use 'do-while' loops to have our agent collect resources within a time limit. First, we need to create a few variables and define them:
  1. targetResource
  2. targetCount
  3. timeLimit
  4. harvestCount
  5. startTime

## Step 2

Now that we have all 5 of our variables created, let's define them. We want our target resource block to be diamond ore, our target count to be 5, the time limit to be 30 seconds( you will have to convert to milliseconds in our code), our count to begin at 0, and our startTime to be defined as millis.
Now create a loop using the player.say command to count up to the number 10 in the chat. Start by letting i=0 inside of the 'for' loop. Finish the variable with a semicolon symbol.

  

#### ~ tutorialhint

  

```javascript

let targetResource = blocks.diamond_ore
let targetCount = 5
let timeLimit = 30000
let harvestCount = 0
let startTime = control.millis();

  

```

  


  

## Step 3

Next, let's define our chat command to harvest a certain count of our specific resource using addition operators. Use player.say to harvest 5 diamond ores.

 Now create a loop using the player.say command to count up to the number 10 in the chat. Start by letting i=0 inside of the 'for' loop. Finish the variable with a semicolon symbol.

  

#### ~ tutorialhint

  

```javascript

let targetResource = blocks.diamond_ore
let targetCount = 5
let timeLimit = 30000
let harvestCount = 0
let startTime = control.millis();
player.say("Harvest" + targetCount + "" + targetResource);

  

```

  



## Step 4 @unplugged

Now let's build out our do-while loop to have your agent move about the field, check the blocks, and harvest if there is a diamond ore. Use agent.inspect to have your agent check the block as it moves about. You'll want to add in a line of code to have your agent to teleport to you to make it easier to move around and find the blocks.

#### ~ tutorialhint

  

```javascript

let targetResource = blocks.diamond_ore
let targetCount = 5
let timeLimit = 30000
let harvestCount = 0
let startTime = control.millis();
player.say("Harvest" + targetCount + "" + targetResource);

agent.teleportToPlayer();
do {
	let targetPosition = agent.inspect(AgentInspection.Block, forward);
	if (targetPosition && targetPosition.block === targetResource) {
		agent.destroy(targetResource);
		harvestCount++;
		player.say( "Harvested: " + harvestedCount + "/" + targetCount);
		}
}while (harvestedCount < targetCount);		
  

```

  
## Step 5
Last, let's check the time elapsed by using an if statement. Use a break to end the loop once the time limit is up. End your code with an if/else statement that gives a completed message in the chat, or a fail message in the chat, depending on whether or not you harvested more than the target count.

#### ~ tutorialhint

  

```javascript

let targetResource = blocks.diamond_ore
let targetCount = 5
let timeLimit = 30000
let harvestCount = 0
let startTime = control.millis();
player.say("Harvest" + targetCount + "" + targetResource);

agent.teleportToPlayer();
do {
	let targetPosition = agent.inspect(AgentInspection.Block, forward);
	if (targetPosition && targetPosition.block === targetResource) {
		agent.destroy(targetResource);
		harvestCount++;
		player.say( "Harvested: " + harvestedCount + "/" + targetCount);
		}

	let currentTime= control.millis();
	if (currentTime - startTime >= timeLimit) { break; 
	 }
}while (harvestedCount < targetCount);		
  
if (harvestedCount >= targetCount) { player.say("Challenge complete! The agent harvested " + harvestedCount + " " + targetResource); } else { player.say("Challenge failed. The agent harvested " + harvestedCount + " " + targetResource + ". Try again!"); }
```

  
  


## Step 6 @unplugged

Now run the code by clicking the **green start button** in the bottom right of the MakeCode screen.

  

![alt text](https://expertjs.codingcredentials.com/Lesson1/1.1/1.JPG?raw=true  "Start")

  

You will know your code is correct when you see the text 1 appear on your screen.

  
  
  

## Step 7

If your code worked as expected move on to the next activity.

  

If it does not work as expected, try to fix and test again.



